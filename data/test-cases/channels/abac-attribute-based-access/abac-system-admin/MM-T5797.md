---
# (Required) Ensure all values are filled up
name: "LDAP sync: User is auto-added to channel when qualifying attribute syncs to their profile (auto-add true)"
status: Draft
priority: Normal
folder: ABAC System Admin
authors: "lindalumitchell"
team_ownership: []
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)

# (Optional)
location: null
component: null
tags: []
labels:
- abac
- info-control
- enterprise-advanced
tested_by_contributor: ""

# (Optional) Test type and tools
cypress: null
detox: null
mmctl: null
playwright: null
rainforest: []
manual_test_environments: []

# Do not change
id: 239265312
key: MM-T5797
created_on: "2025-05-22T05:43:35Z"
last_updated: "2025-04-16T12:44:27Z"
case_hashed: d77117ec7e83062c92c082f52ead6a51dd589bd18a435d1c1ee327f81df3b13a2e89c166a8e1333faebf85e2c549f6ae
steps_hashed: e0567084204505a013976f2c0b12390abd38db38d21c8fb4416374e4685ef2231baa23cab41e05b63a9f883e5f1ae063
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T5797: LDAP sync: User is auto-added to channel when qualifying attribute syncs to their profile (auto-add true)

**Precondition**

\- Enterprise advanced (formerly known as Premium) license\
\- --env MM\_FEATUREFLAGS\_CustomProfileAttributes=true,MM\_FEATUREFLAGS\_AttributeBasedAccessControl=true\
\- Custom profile attributes have been created in System Console > System ​Attributes (Properties), so that they can be used to create a policy

---

**Step 1**

Ensure a policy exists on the server, with one attribute, set to auto-add, syncing with LDAP, using \`= is\`, and applied to a channel:\
1\. As system admin make a note of the attribute needed for a user to be auto-added to a channel\
2\. Note an LDAP user not in the channel and not having the required attribute\
3\. On the LDAP server, add the required attribute to the user's profile\
4\. Back in Mattermost, sync LDAP

**Expected**

\- User who now satisfies the policy is auto-added to the channel\
\- \`User added\` message is posted in the channel by System

---

**Step 2**

Repeat above but use a policy that has two required attributes, one set to use \`ƒ contains\`\
1\. Note an LDAP user who already has one of the required attributes but doesn't have the attribute that uses \`ƒ contains\`\
2\. On the LDAP server, add second required value to satisfy \`ƒ contains\`\
3\. In Mattermost, sync LDAP

**Expected**

\- User who now satisfies the policy is auto-added to the channel\
\- \`User added\` message is posted in the channel by System
