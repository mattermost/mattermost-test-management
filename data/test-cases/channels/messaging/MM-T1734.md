---
# (Required) Ensure all values are filled up
name: "Code blocks highlight as expected"
status: Active
priority: Normal
folder: Messaging
authors: ""
team_ownership: 
- Channels
priority_p1_to_p4: P2 - Core Functions (Do core functions work?)

# (Optional)
location: Messaging
component: null
tags: []
labels: 
- messaging
- fix-versions-not-empty-2022cleanup

# (Optional) Test type and tools
cypress: Update
detox: N/A
mmctl: N/A
playwright: null
rainforest: 
- N/A
- Evaluating
manual_test_environments: []

# Do not change
id: 5245731
key: MM-T1734
created_on: "2020-04-29T14:06:39Z"
last_updated: ""
case_hashed: b2aa1a51b61c433973b426ecf9ca44d6b9eb940363e9f5ad606fa94f1a5be0dff50b59458797fc940cd2433186b955f5
steps_hashed: d28149c3b34f9f192d5295a071b9023f0c7f9ab3f4af943d03c9c2566ff0b5b92e9842340c4bbc341d15ac9c03cb4ee1
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T1734: Code blocks highlight as expected

---

**Step 1**

**Typescript code:**\\

1. Post 3 code blocks listed in the test data section

_Related ticket(s):_

(**Story**) [Typescript support for code highlighting — MM-24508](https://mattermost.atlassian.net/browse/MM-24508)

**Test Data**

````
const message: string = 'hello world';\console.log(message);\```\**_and_**\\```tsx\const message: string = 'hello world';\console.log(message);\```\\**_and_**\\```typescript\const message: string = 'hello world';\console.log(message);\
````

**Expected**

- Verify TypeScript syntax highlighting is present (see images below)

![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1588168937566-Screen+Shot+2020-04-29+at+10.00.41+AM.png) ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1588168951513-Screen+Shot+2020-04-29+at+10.01.06+AM.png)

---

**Step 2**

**Postgres syntax highlight:**\\

- Post 3 code blocks listed in the test data section

_Related ticket(s):_

- [Add support for PostgreSQL & PL/pgSQL syntax highlighting — MM-25386](https://mattermost.atlassian.net/browse/MM-25386)
- [Issue with PostgreSQL & PL/pgSQL syntax highlighting — MM-31179](https://mattermost.atlassian.net/browse/MM-31179)

**Test Data**

````
CREATE OR REPLACE FUNCTION snitch() RETURNS event\_trigger AS $$\BEGIN\RAISE NOTICE 'snitch: % %', tg\_event, tg\_tag;\END;\$$ LANGUAGE plpgsql;\\CREATE EVENT TRIGGER snitch ON ddl\_command\_start EXECUTE PROCEDURE snitch();\```\**_and_**\\```pgsql\CREATE OR REPLACE FUNCTION snitch() RETURNS event\_trigger AS $$\BEGIN\RAISE NOTICE 'snitch: % %', tg\_event, tg\_tag;\END;\$$ LANGUAGE plpgsql;\\CREATE EVENT TRIGGER snitch ON ddl\_command\_start EXECUTE PROCEDURE snitch();\```\**_and_**\\```postgresql\CREATE OR REPLACE FUNCTION snitch() RETURNS event\_trigger AS $$\BEGIN\RAISE NOTICE 'snitch: % %', tg\_event, tg\_tag;\END;\$$ LANGUAGE plpgsql;\\CREATE EVENT TRIGGER snitch ON ddl\_command\_start EXECUTE PROCEDURE snitch();\
````

**Expected**

- Verify PostgreSQL & PL/pgSQL syntax highlighting (see images below)
  \
  \
  ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1592250553067-1592250553067.png)\
  \
  ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1592250582975-1592250582975.png)

---

**Step 3**

Set the Enable Latex Rendering to true, then try to post the sample text provided with the following suffixes:

1. texcode
2. latexcode

_Related ticket(s):_

<https://mattermost.atlassian.net/browse/MM-25668>

**Test Data**

````
\documentclass{article}\\\begin{document}\\Hello World!\\\end{document}\```\\AND/OR \\```latexcode\\documentclass{article}\\\begin{document}\\Hello World!\\\end{document}\
````

**Expected**

The sample text should post and is properly syntax-highlighted\
\
![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1601595239432-Screen+Shot+2020-10-01+at+7.33.01+PM.png)

---

**Step 4**

**Python syntax highlight:**\
\\

1. Paste the sample code \\

   ```
   op.execute("""\UPDATE events.settings\SET name = 'paper\_review\_conditions'\WHERE module = 'editing' AND name = 'review\_conditions' """)\
   ```

2. Paste sample code file and click on to open in preview

**Test Data**

![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524404360-Screen+Shot+2020-10-12+at+1.38.31+PM.png) ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524384147-Screen+Shot+2020-10-12+at+1.39.17+PM.png)\
![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524700769-1602524700769.png)

**Expected**

1\. Verify line numbers line up with the text in the code block and are not selectable; There should be no extra lines\
Term appears correctly in search results when highlighted\
\
2\. Line numbers line up with text in preview of a code file attachment.

---

**Step 5**

**sh syntax formatting:**\
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

- Post a sample code \\

  ```
  find /path/to/whatever -type f | sed "1,$MAX\_FILES d' | while read fn; do\echo "deleting $fn"\rm -f $fn\done\
  ```

**Test Data**

![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602525351396-1602525351396.png)

**Expected**

- Verify there should be no missing spaces or extra empty lines added to the code

---

**Step 6**

added support for extension .bsl, .os (OneScript oscript.io) 1C: Enterprise syntax highlighting\\

- Post a sample code \\

  ```
  find /path/to/whatever -type f | sed "1,$MAX\_FILES d' | while read fn; do\echo "deleting $fn"\rm -f $fn\done\
  ```

**Expected**

Verify syntax highlighting
