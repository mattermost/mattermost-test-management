---
# (Required) Ensure all values are filled up
name: "ðŸš« ECS â€” Process pending subscriptions"
status: Active
priority: Smoke test
folder: ðŸš« Export Compliance
authors: ""
team_ownership: []

# (Optional) Test type and tools
cypress: null
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: 
- Portal

# (Optional)
component: null
priority_p1_to_p4: null
location: Cloud
tags: []
labels: []

# Do not change
id: 10053433
key: MM-T3984
folder_path: cloud/customer-portal/-export-compliance
created_on: "2021-04-08T20:44:18Z"
last_updated: ""
case_hashed: 56465e42e66e68d03adbf548344eabccb9eec727ab4ac1d1f251dfd82a75b40f6314ef7cda60c29b9478d973d12c1a43
steps_hashed: d83cb30ad55d34309424a3e1da67678c610dfe59a61dc6b7965d91ce937eceeb4d51a46cf8fa18cf70cc009a714e66a1
---

## MM-T3984: ðŸš« ECS â€” Process pending subscriptions

---

**Step 1**

1. Create several portal accounts using criteria (names, locations, companies) known to trigger flags (examples in the test data section)
2. Renew a few Mattermost licenses using similar criteria
3. Log into <https://www.visualcompliance.com/>
4. Once logged in hover over "Restricted Party Screening" in the top right then click "Compliance Manager Workflow" from the dropdown
5. Under the Compliance Manager Workflow section on the left click "Full Review"
6. Click the search button on the form that appears
7. In the list that appears below click on the Alert types (e.g., Yellow, Red, Double Red, etc.) to view more details about the subscription needing review
8. Change the status to either Cleared or Closed (your choice for testing purposes)
9. Ask a dev to run the cronjob that processes the screening workflow you just completed

**Test Data**

|                                                                                                                                                                                                      |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Your Account has been Suspended email                                                                                                                                                                |
| ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1617918075821-1617918075821.png) |

**Expected**

- Depending upon the choices you made on the test customers you processed the following will happen once the cronjob is complete

  - Cleared

    - Activates the license for the customer
    - Sends them an email containing the license
    - A subscription is created in Stripe
    - Basically clears them as if they never raised any flags possibly identifying them as a restricted person/company/country

  - Closed

    - If they are still logged into the portal account they created they will be automatically logged out
    - They won't be able to log back in
    - They will receive an email telling them that their account has been suspended
    - Stripe will not show that a subscription was created
