---
# (Required) Ensure all values are filled up
name: "ðŸš« ECS â€” Process pending subscriptions"
status: Active
priority: Smoke test
folder: ðŸš« Export Compliance
authors: ""
team_ownership: []
priority_p1_to_p4: "P3 - Deep Functions (Do extensive scenarios work?)"

# (Optional)
location: Cloud
component: null
tags: []
labels: []

# (Optional) Test type and tools
cypress: null
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: 
- Portal

# Do not change
id: 10053433
key: MM-T3984
created_on: "2021-04-08T20:44:18Z"
last_updated: ""
case_hashed: 24ca4b676e3fedaae8e91642a9f5234b23a7b62ddb957fac743ec3470809ddb121b7ba89d3b72765c5945215f30e7814
steps_hashed: 8cf112d02f5624058f628efb99e5df9d7685844429a2b4c9ab455b10b6b0aa6576e7411c3a8007c03ef1e5e38f923e62
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T3984: ðŸš« ECS â€” Process pending subscriptions

---

**Step 1**

1. Create several portal accounts using criteria (names, locations, companies) known to trigger flags (examples in the test data section)
2. Renew a few Mattermost licenses using similar criteria
3. Log into <https://www.visualcompliance.com/>
4. Once logged in hover over "Restricted Party Screening" in the top right then click "Compliance Manager Workflow" from the dropdown
5. Under the Compliance Manager Workflow section on the left click "Full Review"
6. Click the search button on the form that appears
7. In the list that appears below click on the Alert types (e.g., Yellow, Red, Double Red, etc.) to view more details about the subscription needing review
8. Change the status to either Cleared or Closed (your choice for testing purposes)
9. Ask a dev to run the cronjob that processes the screening workflow you just completed

**Test Data**

|                                                                                                                                                                                                      |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Your Account has been Suspended email                                                                                                                                                                |
| ![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1617918075821-1617918075821.png) |

**Expected**

- Depending upon the choices you made on the test customers you processed the following will happen once the cronjob is complete

  - Cleared

    - Activates the license for the customer
    - Sends them an email containing the license
    - A subscription is created in Stripe
    - Basically clears them as if they never raised any flags possibly identifying them as a restricted person/company/country

  - Closed

    - If they are still logged into the portal account they created they will be automatically logged out
    - They won't be able to log back in
    - They will receive an email telling them that their account has been suspended
    - Stripe will not show that a subscription was created
