---
# (Required) Ensure all values are filled up
name: "Self-Hosted | Verify Stripe subscription is updated"
status: Active
priority: Normal
folder: In product purchase
authors: "@yasserfaraazkhan"
team_ownership: 
- Self-Serve
priority_p1_to_p4: P2 - Core Functions (Do core functions work?)

# (Optional)
location: null
component: null
tags: []
labels: []

# (Optional) Test type and tools
cypress: null
detox: null
mmctl: null
playwright: null
rainforest: []
manual_test_environments: []

# Do not change
id: 77685592
key: MM-T5370
created_on: "2023-01-04T18:17:47Z"
last_updated: "2023-01-04T23:47:46Z"
case_hashed: 75df3c72997a0031999bbe4d6844986db830db0c8da09aaa8c739b8dd08ae1666c23e062b86adf592d37f676137bdb03
steps_hashed: 0e7a42de01fff19d81cb075c7db7ca164908f42c4e96a03e87be445809a07964cba058148976051a40c006a8e0eb8140
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T5370: Self-Hosted | Verify Stripe subscription is updated

---

**Step 1**

<https://mattermost.atlassian.net/browse/MM-47424>

Pre-requisites:

- Have a workspace with test self-hosted currently on free plan.
- Make sure the instance where feature is being tested had the feature flag 'ServiceSettings.SelfHostedPurchase' enabled

Test:

- Follow steps in \<test-1.md> to make a purchase.
- Verify user is able to see Success screen to confirm the purchase.

On successful purchase, in Stripe,(manual)

- Verify that user is created with subscription and payment details is updated under the customer's account
- Verify pricing details and successful purchase on Card is registered

On unsuccessful purchase, due to payment issue, in Stripe,(manual)

- Verify if the User is created in stripe account.
- Verify if the newly created user has been charged. (Ideally, in unsuccessful scenario the subscription will not be created)
- Verify Billings page is not displayed to the user.
