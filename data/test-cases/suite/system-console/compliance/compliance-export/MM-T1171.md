---
# (Required) Ensure all values are filled up
name: "Compliance Export - Bot / webhook post indicates bot username in the export in Global Relay"
status: Active
priority: Normal
folder: Compliance Export
authors: ""
team_ownership: 
- Suite Users

# (Optional)
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)
location: System Console
component: null
tags: 
- Never tested
labels: 
- system-console
- fix-versions-not-empty-2022cleanup

# (Optional) Test type and tools
cypress: Ticket Open
detox: null
mmctl: null
playwright: null
rainforest: []
manual_test_environments: 
- Webapp
- Cloud

# Do not change
id: 4058901
key: MM-T1171
created_on: "2020-01-22T19:26:29Z"
last_updated: ""
case_hashed: 660946b41ebce7c852ef8317d7d2cd6a12e6d17b73fef14bc4805d3cfd39e05418d530acff177dc8c8099459e5937c7a
steps_hashed: 48d593c5b699c297a57e043afcb2aa2fadb5091b75598e113f0542efcc904d78e9f1aa9c9bcd70045e3a97e762cbdd18
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T1171: Compliance Export - Bot / webhook post indicates bot username in the export in Global Relay

---

**Step 1**

Compliance - Compliance Export - Custom Post Types\
–––––––––––––––––––––––––

1. Create a webhook
2. Post a user message
3. Simulate a bot and webhook post with these requests:\
   \
   {code}\
   curl -i -X POST -H "Content-Type: application/json" -d "{\\"text\\": \\"This is an incoming webhook message\\"}" http\://127.0.0.1:8065/hooks/webhookidentifier\
   {code}\
   \
   {code}\
   curl -i -X POST -H "Content-Type: application/json" -d "{\\"text\\": \\"This is a bot message\\"}" http\://127.0.0.1:8065/hooks/webhookidentifier\
   {code}
4. Update the {{Props}} setting for the second post using this query:\
   \
   {code:sql}\
   UPDATE Posts Set Props = '{"from\_webhook":"true","html":"**Test HTML**","override\_username":"test\_username\_override","webhook\_display\_name":"Test Bot"}', Type = 'custom\_bot\_type' WHERE Message = 'This is a bot message';\
   {code}\
   \
   Postman:\
   {\
   "username": "test\_username\_override",\
   "type": "custom\_bot\_type",\
   "text": "This is a bot message"\
   }
5. Run the Global Relay Export
6. Verify that the bot message you modified indicates the bot user name

_Related ticket(s):_

(**Story**) [Add custom post types to compliance exports — MM-17466](https://mattermost.atlassian.net/browse/MM-17466)

**Test Data**

![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1605085977550-Screen+Shot+2020-11-11+at+1.12.29+AM.png)\
![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1605086237869-Screen+Shot+2020-11-11+at+1.16.24+AM.png)

**Expected**

- The bot message "This is a bot message" should have the username @test\_username\_override instead of the webhook user.
