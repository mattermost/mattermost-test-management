---
# (Required) Ensure all values are filled up
name: "Download Compliance Export File - Only User with permission should download compliance export"
status: Active
priority: Smoke test
folder: Compliance Export
authors: ""
team_ownership: 
- Suite Users
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)

# (Optional)
location: System Console
component: null
tags: 
- Never tested
labels: 
- system-console

# (Optional) Test type and tools
cypress: Ticket Open
detox: null
mmctl: null
playwright: null
rainforest: []
manual_test_environments: []

# Do not change
id: 8553192
key: MM-T3667
created_on: "2021-01-12T18:17:43Z"
last_updated: ""
case_hashed: 28d331dcf24fa8068008388a1ee7f2226350e26b0a34fc6141b5ebb8730e2da9faf7b686c6061814e8ded9efd7f9f362
steps_hashed: e6981954aafc93d059a129cd7415dd5caa55b87946788b904de2dd70a6edfded8c592645b0c65946567ae384d695d362
---

<!-- (Auto-generated) Based on frontmatter's "key" and "name" -->

## MM-T3667: Download Compliance Export File - Only User with permission should download compliance export

---

**Step 1**

1\. Ensure the DownloadExportResults config is set to true in config.json and restart the server.\
2\. Login as System Admin and trigger a compliance export for CSV and ensure some messages are exported.\
3\. Now login as System Manager and notice that there is no option to view Compliance Exports.\
4\. Now trigger the following API:\
/api/v4/jobs/type/message\_export?page=0\&per\_page=50\
5\. This will return the ID of the exported file which can be downloaded.\
6\. Now access the following API from the browser:\
/api/v4/jobs/\<JOB\_ID>/download

**Expected**

System User should not be able to download and following Json message should show up,\\

```
"message":"You do not have the appropriate permissions."
```

![](https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1610475224466-1610475224465.png)
